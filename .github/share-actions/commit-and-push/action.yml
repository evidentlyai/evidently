name: Commit and push documentation
runs:
  using: "composite"
  steps:
    - name: ðŸ”§ Commit and push
      shell: bash
      run: |
        git config user.name "Evidently Bot"
        git config user.email "evidently-bot@evidentlyai.com"

        git add -A

        # Check if there are any changes to commit
        if git diff --staged --quiet; then
          echo "No changes to commit, working tree clean"
          exit 0
        fi

        git commit -m "commit new docs"

        # If the push fails, pull the latest changes and try again
        git push || (git pull --rebase && git push)
