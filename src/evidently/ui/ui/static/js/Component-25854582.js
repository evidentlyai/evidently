import{am as p,o as f,u as g,an as T,k as w,j as s,G as o,O as y,B as x,ap as b,x as I,aq as D,ar as L,as as c,at as t,au as R,L as B,f as k,m as v}from"./vendor-20e1cab3.js";import{i as A}from"./tiny-invariant-dd7d57d2.js";import{a as C}from"./createSvgIcon-29e41749.js";import{u as S,T as $,H as F,D as G}from"./useUpdateQueryStringValueWithoutNavigation-d3de12f7.js";import{f as H}from"./Datetime-bd8955b4.js";import"./ContentCopy-6ea2a1d4.js";const V=async({params:n})=>(A(n.projectId,"missing projectId"),C.getReports(n.projectId)),q={crumb:(n,{pathname:i})=>({to:i,linkText:"Reports"})},N=()=>{const{projectId:n}=p(),i=f(),j=g(),[h]=T(),[a,l]=w.useState(()=>{var e;return((e=h.get("tags"))==null?void 0:e.split(","))||[]});S("tags",a.join(","));const d=j.find(({id:e})=>e==="show-report-by-id"),m=d?[]:Array.from(new Set(i.flatMap(({tags:e})=>e))),u=i.filter(({tags:e})=>d?!1:a.length===0?!0:a.every(r=>e.includes(r)));return d?s.jsx(o,{container:!0,children:s.jsx(o,{item:!0,xs:12,children:s.jsx(y,{})})}):s.jsxs(s.Fragment,{children:[s.jsx(x,{sx:{padding:2},children:s.jsx(o,{container:!0,children:s.jsx(o,{item:!0,xs:12,md:6,children:s.jsx(b,{multiple:!0,limitTags:2,value:a,onChange:(e,r)=>l(r),options:m,renderInput:e=>s.jsx(I,{...e,variant:"standard",label:"Filter by Tags"})})})})}),s.jsxs(D,{children:[s.jsxs(L,{children:[s.jsxs(c,{children:[s.jsx(t,{children:"Report ID"}),s.jsx(t,{children:"Tags"}),s.jsx(t,{children:"Timestamp"}),s.jsx(t,{children:"Actions"})]}),s.jsx(c,{})]}),s.jsx(R,{children:u.map(e=>s.jsxs(c,{children:[s.jsx(t,{children:s.jsx($,{showText:e.id,copyText:e.id})}),s.jsx(t,{children:s.jsx(x,{maxWidth:250,children:s.jsx(F,{onClick:r=>{a.includes(r)||l([...a,r])},tags:e.tags})})}),s.jsx(t,{children:H(new Date(Date.parse(e.timestamp)))}),s.jsxs(t,{children:[s.jsx(B,{component:k,to:`${e.id}`,children:s.jsx(v,{children:"View"})}),s.jsx(G,{downloadLink:`/api/projects/${n}/${e.id}/download`})]})]},`r-${e.id}`))})]})]})};export{N as Component,q as handle,V as loader};
