import{R as b,j as e,x as v,X as B,Y as D,P as I,Z as $,$ as M,M as P,s as p,B as f,a0 as j,w as C,W as A,z,m as F,u as O,G as h,O as E,a1 as W,V as G,a2 as H,a3 as N,a4 as w,a5 as u,a6 as U,a7 as Q,T as J,d as X,L as Y,o as Z}from"./vendor-22c0ce7a.js";import{d as V}from"./ContentCopy-a50dbcdd.js";import{r as q,i as K}from"./createSvgIcon-6a7b5fca.js";const ee=[{title:"Download HTML",format:"html"},{title:"Download JSON",format:"json"}];function te(r){const[s,n]=b.useState(!1),o=b.useRef(null),l=(i,x)=>{window.open(`${i}?report_format=${x}`,"_blank"),n(!1)},a=()=>{n(i=>!i)},m=i=>{o.current&&o.current.contains(i.target)||n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{ref:o,color:"primary",size:"small","aria-controls":s?"split-button-menu":void 0,"aria-expanded":s?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:a,children:"Download"}),e.jsx(B,{open:s,anchorEl:o.current,transition:!0,children:({TransitionProps:i,placement:x})=>e.jsx(D,{...i,style:{transformOrigin:x==="bottom"?"center top":"center bottom"},children:e.jsx(I,{children:e.jsx($,{onClickAway:m,children:e.jsx(M,{id:"split-button-menu",children:ee.map(c=>e.jsx(P,{onClick:()=>l(r.downloadLink,c.format),children:c.title},c.format))})})})})})]})}var g={},se=K;Object.defineProperty(g,"__esModule",{value:!0});var y=g.default=void 0,re=se(q()),ne=e,ae=(0,re.default)((0,ne.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded");y=g.default=ae;const ie=({onClick:r,tags:s,limitTags:n=2})=>{const[o,l]=p.useState(!1);return e.jsxs(f,{display:"flex",alignContent:"center",flexWrap:"wrap",children:[s.slice(0,n).map(a=>e.jsx(j,{onClick:()=>r(a),label:a,style:{margin:3}},a)),o&&s.slice(n).map(a=>e.jsx(j,{onClick:()=>r(a),label:a,style:{margin:3}},a)),!o&&s.length>n&&e.jsx(j,{variant:"outlined",label:`+${s.length-n}`,style:{margin:3,borderColor:"grey"},onClick:()=>l(!0)},"+N"),s.length>0&&o&&e.jsx(C,{style:{margin:3},onClick:()=>l(!1),children:e.jsx(y,{fontSize:"small"})})]})},oe=({showText:r,copyText:s})=>e.jsxs(f,{children:[r,e.jsx(C,{size:"small",style:{marginLeft:10},onClick:()=>navigator.clipboard.writeText(s),children:e.jsx(V,{fontSize:"small"})})]});function le(r,s){p.useEffect(()=>{const n=new URLSearchParams(window.location.search),o=n.get(r)??"";if(s===o)return;s?n.set(r,s):n.delete(r);const l=[window.location.pathname,n.toString()].filter(Boolean).join("?");window.history.replaceState(null,"",l)},[r,s])}const xe={crumb:(r,{pathname:s})=>({to:s,linkText:s.split("/").reverse()[0]==="reports"?"Reports":"Test Suites"})},me=({type:r})=>{const{projectId:s}=A(),n=z(),o=F(),[l]=O(),[a,m]=p.useState(()=>{var t;return((t=l.get("tags"))==null?void 0:t.split(","))||[]}),[i,x]=p.useState("desc");le("tags",a.join(","));const c=o.find(({id:t})=>t===`show-${r}-by-id`),L=c?[]:Array.from(new Set(n.flatMap(({tags:t})=>t))),S=n.filter(({tags:t})=>c?!1:a.length===0?!0:a.every(d=>t.includes(d))),k=i===void 0||c?S:S.sort((t,d)=>{const[R,_]=[Date.parse(t.timestamp),Date.parse(d.timestamp)],T=R-_;return i==="desc"?-T:i==="asc"?T:0});return c?e.jsx(h,{container:!0,children:e.jsx(h,{item:!0,xs:12,children:e.jsx(E,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{padding:2},children:e.jsx(h,{container:!0,children:e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(W,{multiple:!0,limitTags:2,value:a,onChange:(t,d)=>m(d),options:L,renderInput:t=>e.jsx(G,{...t,variant:"standard",label:"Filter by Tags"})})})})}),e.jsxs(H,{children:[e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(u,{children:r==="report"?"Report ID":r==="test-suite"?"Test Suite ID":"indefined"}),e.jsx(u,{children:"Tags"}),e.jsx(u,{children:e.jsx(U,{active:!!i,direction:i,onClick:()=>{x(t=>{if(t===void 0)return"desc";if(t==="desc")return"asc"})},children:"Timestamp"})}),e.jsx(u,{children:"Actions"})]}),e.jsx(w,{})]}),e.jsx(Q,{children:k.map(t=>e.jsxs(w,{children:[e.jsx(u,{children:e.jsx(oe,{showText:t.id,copyText:t.id})}),e.jsx(u,{children:e.jsx(f,{maxWidth:250,children:e.jsx(ie,{onClick:d=>{a.includes(d)||m([...a,d])},tags:t.tags})})}),e.jsx(u,{children:e.jsx(J,{variant:"body2",children:X(t.timestamp).locale("en-gb").format("llll")})}),e.jsxs(u,{children:[e.jsx(Y,{component:Z,to:`${t.id}`,children:e.jsx(v,{children:"View"})}),e.jsx(te,{downloadLink:`/api/projects/${s}/${t.id}/download`})]})]},`r-${t.id}`))})]})]})};export{me as SnapshotTemplate,xe as handle};
