import{k as u,h as f,u as T,l as g,e as b,j as s,O as w,L as y}from"./vendor-20fe28cb.js";import{i as I}from"./tiny-invariant-dd7d57d2.js";import{m as L,j as m}from"./createSvgIcon-32ff061e.js";import{u as D,A as R,T as A,H as B,D as k}from"./useUpdateQueryStringValueWithoutNavigation-a800b066.js";import{f as v}from"./Datetime-bd8955b4.js";import{G as o}from"./Grid-1fc5f2c4.js";import{T as C}from"./TextField-e6f198b7.js";import{T as S,a as $,b as c,c as t,d as F}from"./TableRow-6c9d5a1d.js";import{L as G}from"./Link-edf04226.js";import{B as H}from"./Button-9236d689.js";import"./ContentCopy-d4234e2f.js";const z=async({params:i})=>(I(i.projectId,"missing projectId"),L.getReports(i.projectId)),J={crumb:(i,{pathname:n})=>({to:n,linkText:"Reports"})},K=()=>{const{projectId:i}=u(),n=f(),x=T(),[j]=g(),[r,l]=b.useState(()=>{var e;return((e=j.get("tags"))==null?void 0:e.split(","))||[]});D("tags",r.join(","));const d=x.find(({id:e})=>e==="show-report-by-id"),h=d?[]:Array.from(new Set(n.flatMap(({tags:e})=>e))),p=n.filter(({tags:e})=>d?!1:r.length===0?!0:r.every(a=>e.includes(a)));return d?s.jsx(o,{container:!0,children:s.jsx(o,{item:!0,xs:12,children:s.jsx(w,{})})}):s.jsxs(s.Fragment,{children:[s.jsx(m,{sx:{padding:2},children:s.jsx(o,{container:!0,children:s.jsx(o,{item:!0,xs:12,md:6,children:s.jsx(R,{multiple:!0,limitTags:2,value:r,onChange:(e,a)=>l(a),options:h,renderInput:e=>s.jsx(C,{...e,variant:"standard",label:"Filter by Tags"})})})})}),s.jsxs(S,{children:[s.jsxs($,{children:[s.jsxs(c,{children:[s.jsx(t,{children:"Report ID"}),s.jsx(t,{children:"Tags"}),s.jsx(t,{children:"Timestamp"}),s.jsx(t,{children:"Actions"})]}),s.jsx(c,{})]}),s.jsx(F,{children:p.map(e=>s.jsxs(c,{children:[s.jsx(t,{children:s.jsx(A,{showText:e.id,copyText:e.id})}),s.jsx(t,{children:s.jsx(m,{maxWidth:250,children:s.jsx(B,{onClick:a=>{r.includes(a)||l([...r,a])},tags:e.tags})})}),s.jsx(t,{children:v(new Date(Date.parse(e.timestamp)))}),s.jsxs(t,{children:[s.jsx(G,{component:y,to:`${e.id}`,children:s.jsx(H,{children:"View"})}),s.jsx(k,{downloadLink:`/api/projects/${i}/${e.id}/download`})]})]},`r-${e.id}`))})]})]})};export{K as Component,J as handle,z as loader};
