import{A as e,B as t,C as n,D as r,E as i,F as a,G as o,H as s,I as c,J as l,K as u,L as d,M as f,N as p,O as m,P as h,Q as g,R as _,ad as v,ae as y,al as b,am as x,an as S,ao as C,ap as w,aq as T,ar as E,au as ee,av as te,b as ne,c as D,d as re,e as ie,f as ae,g as oe,h as O,i as k,j as se,k as ce,l as le,m as A,n as j,o as ue,p as de,q as M,r as N,s as fe,t as pe,u as me,v as P,w as he,x as ge,y as F,z as I}from"./tiny-invariant-BZhurpSj.js";import{G as _e,U as L,W as ve,a$ as ye,a3 as R,aD as z,aE as B,aF as V,aG as H,aU as U,aV as W,aW as be,aX as xe,af as Se,am as G,b as Ce,b0 as we,b2 as Te,b3 as K,b4 as q,b5 as J,bk as Ee,bl as De,bo as Y,bp as X,bq as Oe,br as ke,bs as Ae,bt as je,bw as Me,c as Ne,ce as Pe,cj as Fe,d as Ie,e as Le,f as Re,g as ze,h as Be,i as Ve,j as He,k as Ue,l as We}from"./index-VnM9uFcn.js";const Ge=e=>`${e.metric??e.metric_type}:${JSON.stringify(e?.tags?.toSorted())}:${JSON.stringify(e.metric_labels)}`,Ke=e=>e.map(Ge).join(`|`),qe=e=>{if(e===`full`)return{xs:12,sm:12,md:12,lg:12};if(e===`half`)return{xs:12,sm:12,md:6,lg:6};Ue(e)},Je=e=>{let t={series:[],sources:[]},n=e.title??``,r=e.subtitle??``,i=350,a=e.plot_params?.plot_type,o=a===`line`||a===`bar`||a===`text`||a===`counter`||a===`pie`?a:`line`,s=e.plot_params?.aggregation,c=s===`last`||s===`sum`||s===`avg`?s:`last`,l=e.size===`full`||e.size===`half`?e.size:`full`,u=e.values.map(e=>e.legend);if(o===`text`)return{type:o,size:l,title:n,description:r};if(o===`counter`)return{type:o,size:l,title:n,description:r,aggregation:c,data:t,labels:u};if(o===`pie`)return{type:o,size:l,title:n,description:r,aggregation:c,data:t,labels:u,height:i};if(o===`bar`||o===`line`){let a=!!e.plot_params?.is_stacked;return{type:o,size:l,title:n,description:r,isStacked:a,data:t,labels:u,height:i}}Ue(o)};var Z=Fe(Me());const Ye=({panels:e,PanelComponent:t})=>e.length===0?(0,Z.jsx)(G,{my:3,align:`center`,variant:`h4`,children:`This dashboard is currently empty. Please add a monitoring panel to start.`}):(0,Z.jsx)(L,{container:!0,spacing:3,direction:`row`,alignItems:`stretch`,children:e.map(e=>{let n=Je(e);return(0,Z.jsx)(L,{size:qe(n.size),children:(0,Z.jsx)(t,{panel:e})},e.id)})});var Q=Fe(Pe());const Xe=Q.createContext(null),Ze=()=>(0,Q.useContext)(Xe),Qe=({data:e,labels:t,title:n,description:r,aggregation:i})=>(0,Z.jsx)(T,{title:n,description:r,textCenterAlign:!0,children:(0,Z.jsx)(R,{children:(0,Z.jsx)(L,{container:!0,spacing:2,justifyContent:`space-evenly`,children:e.series.map(({metric_type:e,params:n,values:r,filter_index:a},o)=>{let{label:s,defaultLabel:c}=C({metric_type:e,params:n,labels:t,filter_index:a}),l=w(r,i);return(0,Z.jsx)(L,{children:(0,Z.jsxs)(R,{children:[(0,Z.jsx)(G,{variant:`h2`,align:`center`,children:l}),(0,Z.jsx)(G,{component:`pre`,align:`center`,children:s})]})},`${o}:${c}`)})})})});function $e(e){this._context=e}$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function et(e){return new $e(e)}function tt(e){return e[0]}function nt(e){return e[1]}function rt(e,t){var n=u(!0),r=null,i=et,a=null,o=c(l);e=typeof e==`function`?e:e===void 0?tt:u(e),t=typeof t==`function`?t:t===void 0?nt:u(t);function l(c){var l,u=(c=s(c)).length,d,f=!1,p;for(r??(a=i(p=o())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(p)return a=null,p+``||null}return l.x=function(t){return arguments.length?(e=typeof t==`function`?t:u(+t),l):e},l.y=function(e){return arguments.length?(t=typeof e==`function`?e:u(+e),l):t},l.defined=function(e){return arguments.length?(n=typeof e==`function`?e:u(!!e),l):n},l.curve=function(e){return arguments.length?(i=e,r!=null&&(a=i(r)),l):i},l.context=function(e){return arguments.length?(e==null?r=a=null:a=i(r=e),l):r},l}var it=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}};function at(e){return new it(e,!0)}function ot(e){return new it(e,!1)}function st(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ct(e,t){this._context=e,this._k=(1-t)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:st(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:st(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lt=function e(t){function n(e){return new ct(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ut(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>l){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>l){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function dt(e,t){this._context=e,this._alpha=t}dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ut(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ft=function e(t){function n(e){return t?new dt(e,t):new ct(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function pt(e){return e<0?-1:1}function mt(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(pt(a)+pt(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ht(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gt(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function _t(e){this._context=e}_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gt(this,this._t0,ht(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gt(this,ht(this,n=mt(this,e,t)),n);break;default:gt(this,this._t0,n=mt(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function vt(e){this._context=new yt(e)}(vt.prototype=Object.create(_t.prototype)).point=function(e,t){_t.prototype.point.call(this,t,e)};function yt(e){this._context=e}yt.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function bt(e){return new _t(e)}function xt(e){return new vt(e)}function St(e){this._context=e}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ct(e),i=Ct(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ct(e){var t,n=e.length-1,r,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function wt(e){return new St(e)}function Tt(e,t){this._context=e,this._t=t}Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}this._x=e,this._y=t}};function Et(e){return new Tt(e,.5)}function Dt(e){return new Tt(e,0)}function Ot(e){return new Tt(e,1)}const kt=pe(`bar`),At=me(`bar`);function jt(){return At()}function Mt(e,t){let n=y(e.x,t.x),r=y(e.y,t.y),i=y(e.width,t.width),a=y(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function Nt(e){let t={x:e.layout===`vertical`?e.x:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y,width:e.layout===`vertical`?e.width:0,height:e.layout===`vertical`?0:e.height};return j({x:e.x,y:e.y,width:e.width,height:e.height},{createInterpolator:Mt,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},transformProps:e=>e,initialProps:t,skip:e.skipAnimation,ref:e.ref})}function Pt(e,t){let n=y(e.x,t.x),r=y(e.y,t.y),i=y(e.width,t.width),a=y(e.height,t.height);return e=>({x:n(e),y:r(e),width:i(e),height:a(e)})}function Ft(e){let t={x:e.layout===`vertical`?e.x+e.width/2:e.xOrigin,y:e.layout===`vertical`?e.yOrigin:e.y+e.height/2,width:e.width,height:e.height},n={x:e.x+e.width/2,y:e.y+e.height/2,width:e.width,height:e.height};return j(n,{createInterpolator:Pt,transformProps:e=>e,applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString())},initialProps:t,skip:e.skipAnimation,ref:e.ref})}function It(e){return j({d:e.d},{createInterpolator:(e,t)=>{let n=v(e.d,t.d);return e=>({d:n(e)})},applyProps:(e,{d:t})=>e.setAttribute(`d`,t),skip:e.skipAnimation,transformProps:e=>e,ref:e.ref})}H();function Lt(){return typeof window>`u`}const $={widthCache:{},cacheCount:0},Rt=2e3,zt={position:`absolute`,top:`-20000px`,left:0,padding:0,margin:0,border:`none`,whiteSpace:`pre`},Bt=[`minWidth`,`maxWidth`,`width`,`minHeight`,`maxHeight`,`height`,`top`,`left`,`fontSize`,`padding`,`margin`,`paddingLeft`,`paddingRight`,`paddingTop`,`paddingBottom`,`marginLeft`,`marginRight`,`marginTop`,`marginBottom`],Vt=`mui_measurement_span`;function Ht(e,t){return Bt.indexOf(e)>=0&&t===+t?`${t}px`:t}function Ut(e){let t=e.split(``),n=t.reduce((e,t)=>t===t.toUpperCase()?[...e,`-`,t.toLowerCase()]:[...e,t],[]);return n.join(``)}const Wt=e=>Object.keys(e).sort().reduce((t,n)=>`${t}${Ut(n)}:${Ht(n,e[n])};`,``);let Gt;const Kt=(e,t={})=>{if(e==null||Lt())return{width:0,height:0};let n=`${e}`,r=Wt(t),i=`${n}-${r}`;if($.widthCache[i])return $.widthCache[i];try{let e=document.getElementById(Vt);e===null&&(e=document.createElement(`span`),e.setAttribute(`id`,Vt),e.setAttribute(`aria-hidden`,`true`),document.body.appendChild(e));let r=V({},zt,t);Object.keys(r).map(t=>(e.style[Ut(t)]=Ht(t,r[t]),t)),e.textContent=n;let a=e.getBoundingClientRect(),o={width:a.width,height:a.height};return $.widthCache[i]=o,$.cacheCount+1>Rt?($.cacheCount=0,$.widthCache={}):$.cacheCount+=1,Gt&&clearTimeout(Gt),Gt=setTimeout(()=>{e.textContent=``},0),o}catch{return{width:0,height:0}}};H();function qt({style:e,needsComputation:t,text:n}){return n.split(`
`).map(n=>V({text:n},t?Kt(n,e):{width:0,height:0}))}function Jt(){let[e,t]=Q.useState(typeof window<`u`||!1);return Q.useEffect(()=>{t(!0)},[]),e}H(),B();const Yt=[`x`,`y`,`style`,`text`,`ownerState`],Xt=[`angle`,`textAnchor`,`dominantBaseline`];function Zt(e){let{x:t,y:n,style:r,text:i}=e,a=z(e,Yt),o=r??{},{angle:s,textAnchor:c,dominantBaseline:l}=o,u=z(o,Xt),d=Jt(),f=Q.useMemo(()=>qt({style:u,needsComputation:d&&i.includes(`
`),text:i}),[u,i,d]),p;switch(l){case`hanging`:case`text-before-edge`:p=0;break;case`central`:p=(f.length-1)/2*-f[0].height;break;default:p=(f.length-1)*-f[0].height;break}return(0,Z.jsx)(`text`,V({},a,{transform:s?`rotate(${s}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:l,style:u,children:f.map((e,n)=>(0,Z.jsx)(`tspan`,{x:t,dy:`${n===0?p:f[0].height}px`,dominantBaseline:l,children:e.text},n))}))}const Qt=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function $t(e){return e.length}function en(e){let t=Qt.segment(e),n=0;for(let e of t)n+=1;return n}const tn=Qt?en:$t;function nn(e){return e*(Math.PI/180)}const rn=typeof window<`u`&&`Intl`in window&&`Segmenter`in Intl?new Intl.Segmenter(void 0,{granularity:`grapheme`}):null;function an(e,t){return e.slice(0,t)}function on(e,t){let n=rn.segment(e),r=``,i=0;for(let e of n)if(r+=e.segment,i+=1,i>=t)break;return r}const sn=rn?on:an,cn=`…`;function ln(e,t){let{width:n,height:r,measureText:i}=t,a=nn(t.angle),o=i(e),s=Math.abs(o.width*Math.cos(a))+Math.abs(o.height*Math.sin(a)),c=Math.abs(o.width*Math.sin(a))+Math.abs(o.height*Math.cos(a));return s<=n&&c<=r}function un(e,t){if(t(e))return e;let n=e,r=1,i=1/2,a=tn(e),o=a,s=a,c=null;do{if(s=o,o=Math.floor(a*i),o===0)break;n=sn(e,o).trim();let l=t(n+cn);r+=1,l?(c=n,i+=1/2**r):i-=1/2**r}while(Math.abs(o-s)!==1);return c?c+cn:``}Oe(),Y();function dn(e){return ke(`MuiChartsAxis`,e)}const fn=X(`MuiChartsAxis`,[`root`,`line`,`tickContainer`,`tick`,`tickLabel`,`label`,`directionX`,`directionY`,`top`,`bottom`,`left`,`right`]);H(),U();const pn=W(`g`,{name:`MuiChartsAxis`,slot:`Root`})(({theme:e})=>({[`& .${fn.tickLabel}`]:V({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${fn.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${fn.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`,strokeWidth:1},[`& .${fn.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:`crispEdges`}})),mn=5;function hn(e,n,r=0){let i=Math.min(Math.abs(r)%180,Math.abs(Math.abs(r)%180-180)%180);if(i<mn)return e;if(i>90-mn)return n;let a=t(i),o=Math.atan2(n,e);return a<o?e/Math.cos(a):n/Math.sin(a)}Ee();function gn(e=!1){let[t,n]=Q.useState(!1);return De(()=>{e||n(!0)},[e]),Q.useEffect(()=>{e&&n(!0)},[e]),t}function _n(e){let t=A(e);return t<=30||t>=330||t<=210&&t>=150?`middle`:t<=180?`end`:`start`}function vn(e){let t=A(e);return t<=30||t>=330?`hanging`:t<=210&&t>=150?`auto`:`central`}function yn(e){switch(e){case`start`:return`end`;case`end`:return`start`;default:return e}}H(),B(),Te(),q(),U(),ye();const bn=[`scale`,`tickNumber`,`reverse`],xn=e=>{let{classes:t,position:n}=e,r={root:[`root`,`directionX`,n],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]};return J(r,dn,t)},Sn=3,Cn=4;function wn(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:r,reverse:i,isMounted:a,isPointInside:o}){let s=e=>{if(!a||e.formattedValue===void 0)return{width:0,height:0};let n=qt({style:t,needsComputation:!0,text:e.formattedValue});return{width:Math.max(...n.map(e=>e.width)),height:Math.max(n.length*n[0].height)}};if(typeof n==`function`)return new Set(e.filter((e,t)=>n(e.value,t)));let c=0,l=i?-1:1;return new Set(e.filter((e,n)=>{let{offset:i,labelOffset:a}=e,u=i+a;if(n>0&&l*u<l*(c+r)||!o(u))return!1;let{width:d,height:f}=s(e),p=hn(d,f,t?.angle),m=u-l*p/2;return n>0&&l*m<l*(c+r)?!1:(c=u+l*p/2,!0)}))}function Tn(e,t,n,r,i){let a=new Map,o=A(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>90&&o<270&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.left+t.width+t.right-r.offset-r.labelOffset)*c),l=t=>ln(t,{width:e,height:n,angle:o,measureText:e=>Kt(e,i)});a.set(r,un(r.formattedValue.toString(),l))}return a}const En=W(pn,{name:`MuiChartsXAxis`,slot:`Root`})({}),Dn={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function On(e){let{xAxis:t,xAxisIds:n}=F(),i=t[e.axisId??n[0]],{scale:o,tickNumber:s,reverse:c}=i,l=z(i,bn),u=gn(),d=be({props:V({},l,e),name:`MuiChartsXAxis`}),f=V({},Dn,d),{position:g,disableLine:_,disableTicks:v,tickLabelStyle:y,label:b,labelStyle:x,tickSize:S,valueFormatter:C,slots:w,slotProps:T,tickInterval:E,tickLabelInterval:ee,tickPlacement:te,tickLabelPlacement:ne,tickLabelMinGap:D,sx:re,offset:ie,height:ae}=f,oe=xe(),O=we(),k=xn(f),se=r(),{left:ce,top:le,width:A,height:j}=se,{instance:ue}=a(),de=Jt(),M=v?4:S,N=g===`bottom`?1:-1,fe=w?.axisLine??`line`,pe=w?.axisTick??`line`,me=w?.axisTickLabel??Zt,P=w?.axisLabel??Zt,he=_n((g===`bottom`?0:180)-(y?.angle??0)),ge=vn((g===`bottom`?0:180)-(y?.angle??0)),I=K({elementType:me,externalSlotProps:T?.axisTickLabel,additionalProps:{style:V({},oe.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:O?yn(he):he,dominantBaseline:ge},y)},className:k.tickLabel,ownerState:{}}),_e=p({scale:o,tickNumber:s,valueFormatter:C,tickInterval:E,tickPlacement:te,tickLabelPlacement:ne}),L=wn(_e,{tickLabelStyle:I.style,tickLabelInterval:ee,tickLabelMinGap:D,reverse:c,isMounted:u,isPointInside:e=>ue.isPointInside({x:e,y:-1},{direction:`x`})}),ve=K({elementType:P,externalSlotProps:T?.axisLabel,additionalProps:{style:V({},oe.typography.body1,{lineHeight:1,fontSize:14,textAnchor:`middle`,dominantBaseline:g===`bottom`?`text-after-edge`:`text-before-edge`},x)},ownerState:{}}),ye=o.domain(),R=h(o);if(R&&ye.length===0||!R&&ye.some(m)||g===`none`)return null;let B=b?Kt(b,ve.style).height:0,H={x:ce+A/2,y:N*ae},U=Math.max(0,ae-(b?B+Cn:0)-M-Sn),W=de?Tn(L,se,U,O,I.style):new Map(Array.from(L).map(e=>[e,e.formattedValue]));return(0,Z.jsxs)(En,{transform:`translate(0, ${g===`bottom`?le+j+ie:le-ie})`,className:k.root,sx:re,children:[!_&&(0,Z.jsx)(fe,V({x1:ce,x2:ce+A,className:k.line},T?.axisLine)),_e.map((e,t)=>{let{offset:n,labelOffset:r}=e,i=r??0,a=N*(M+Sn),o=ue.isPointInside({x:n,y:-1},{direction:`x`}),s=W.get(e),c=L.has(e);return(0,Z.jsxs)(`g`,{transform:`translate(${n}, 0)`,className:k.tickContainer,children:[!v&&o&&(0,Z.jsx)(pe,V({y2:N*M,className:k.tick},T?.axisTick)),s!==void 0&&c&&(0,Z.jsx)(me,V({x:i,y:a},I,{text:s}))]},t)}),b&&(0,Z.jsx)(`g`,{className:k.label,children:(0,Z.jsx)(P,V({},H,ve,{text:b}))})]})}H(),B(),Te(),q(),U(),ye();const kn=[`scale`,`tickNumber`],An=e=>{let{classes:t,position:n}=e,r={root:[`root`,`directionY`,n],line:[`line`],tickContainer:[`tickContainer`],tick:[`tick`],tickLabel:[`tickLabel`],label:[`label`]};return J(r,dn,t)},jn=2,Mn=2;function Nn(e,t,n,r,i){let a=new Map,o=A(i?.angle??0),s=1,c=1;i?.textAnchor===`start`?(s=1/0,c=1):i?.textAnchor===`end`?(s=1,c=1/0):(s=2,c=2),o>180&&([s,c]=[c,s]),r&&([s,c]=[c,s]);for(let r of e)if(r.formattedValue){let e=Math.min((r.offset+r.labelOffset)*s,(t.top+t.height+t.bottom-r.offset-r.labelOffset)*c),l=t=>ln(t,{width:n,height:e,angle:o,measureText:e=>Kt(e,i)});a.set(r,un(r.formattedValue.toString(),l))}return a}const Pn=W(pn,{name:`MuiChartsYAxis`,slot:`Root`})({}),Fn={disableLine:!1,disableTicks:!1,tickSize:6};function In(t){let{yAxisIds:n,yAxis:i}=e(),o=i[t.axisId??n[0]],{scale:s,tickNumber:c}=o,l=z(o,kn),u=be({props:V({},l,t),name:`MuiChartsYAxis`}),d=V({},Fn,u),{position:f,disableLine:g,disableTicks:_,label:v,labelStyle:y,tickLabelStyle:b,tickSize:x,valueFormatter:S,slots:C,slotProps:w,tickPlacement:T,tickLabelPlacement:E,tickInterval:ee,tickLabelInterval:te,sx:ne,offset:D,width:re}=d,ie=xe(),ae=we(),oe=Jt(),O=An(d),{instance:k}=a(),se=r(),{left:ce,top:le,width:A,height:j}=se,ue=_?4:x,de=p({scale:s,tickNumber:c,valueFormatter:S,tickPlacement:T,tickLabelPlacement:E,tickInterval:ee}),M=f===`right`?1:-1,N=typeof b?.fontSize==`number`?b.fontSize:12,fe=C?.axisLine??`line`,pe=C?.axisTick??`line`,me=C?.axisTickLabel??Zt,P=C?.axisLabel??Zt,he=_n((f===`right`?-90:90)-(b?.angle??0)),ge=vn((f===`right`?-90:90)-(b?.angle??0)),F=K({elementType:me,externalSlotProps:w?.axisTickLabel,additionalProps:{style:V({},ie.typography.caption,{fontSize:N,textAnchor:ae?yn(he):he,dominantBaseline:ge},b)},className:O.tickLabel,ownerState:{}}),I=K({elementType:P,externalSlotProps:w?.axisLabel,additionalProps:{style:V({},ie.typography.body1,{lineHeight:1,fontSize:14,angle:M*90,textAnchor:`middle`,dominantBaseline:`text-before-edge`},y)},ownerState:{}}),_e=K({elementType:fe,externalSlotProps:w?.axisLine,additionalProps:{strokeLinecap:`square`},ownerState:{}}),L=s.domain(),ve=h(s);if(ve&&L.length===0||!ve&&L.some(m)||f===`none`)return null;let ye={x:M*re,y:le+j/2},R=Math.max(0,re-(v?Kt(v,I.style).height+Mn:0)-ue-jn),B=oe?Nn(de,se,R,ae,F.style):new Map(Array.from(de).map(e=>[e,e.formattedValue]));return(0,Z.jsxs)(Pn,{transform:`translate(${f===`right`?ce+A+D:ce-D}, 0)`,className:O.root,sx:ne,children:[!g&&(0,Z.jsx)(fe,V({y1:le,y2:le+j,className:O.line},_e)),de.map((e,t)=>{let{offset:n,labelOffset:r,value:i}=e,a=M*(ue+jn),o=r,s=typeof te==`function`&&!te?.(i,t),c=k.isPointInside({x:-1,y:n},{direction:`y`}),l=B.get(e);return c?(0,Z.jsxs)(`g`,{transform:`translate(0, ${n})`,className:O.tickContainer,children:[!_&&(0,Z.jsx)(pe,V({x2:M*ue,className:O.tick},w?.axisTick)),l!==void 0&&!s&&(0,Z.jsx)(me,V({x:a,y:o,text:l},F))]},t):null}),v&&oe&&(0,Z.jsx)(`g`,{className:O.label,children:(0,Z.jsx)(P,V({},ye,I,{text:v}))})]})}Oe(),Y();function Ln(e){return ke(`MuiChartsGrid`,e)}const Rn=X(`MuiChartsGrid`,[`root`,`line`,`horizontalLine`,`verticalLine`]);U();const zn=W(`g`,{name:`MuiChartsGrid`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${Rn.verticalLine}`]:t.verticalLine},{[`&.${Rn.horizontalLine}`]:t.horizontalLine},t.root]})({}),Bn=W(`line`,{name:`MuiChartsGrid`,slot:`Line`})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:`crispEdges`,strokeWidth:1}));function Vn(e){let{axis:t,start:n,end:r,classes:i}=e,{scale:a,tickNumber:o,tickInterval:s}=t,c=p({scale:a,tickNumber:o,tickInterval:s});return(0,Z.jsx)(Q.Fragment,{children:c.map(({value:e,offset:t})=>(0,Z.jsx)(Bn,{y1:n,y2:r,x1:t,x2:t,className:i.verticalLine},`vertical-${e.getTime?.()??e}`))})}function Hn(e){let{axis:t,start:n,end:r,classes:i}=e,{scale:a,tickNumber:o,tickInterval:s}=t,c=p({scale:a,tickNumber:o,tickInterval:s});return(0,Z.jsx)(Q.Fragment,{children:c.map(({value:e,offset:t})=>(0,Z.jsx)(Bn,{y1:t,y2:t,x1:n,x2:r,className:i.horizontalLine},`horizontal-${e.getTime?.()??e}`))})}H(),B(),q(),U();const Un=[`vertical`,`horizontal`],Wn=({classes:e})=>{let t={root:[`root`],verticalLine:[`line`,`verticalLine`],horizontalLine:[`line`,`horizontalLine`]};return J(t,Ln,e)};function Gn(t){let n=be({props:t,name:`MuiChartsGrid`}),i=r(),{vertical:a,horizontal:o}=n,s=z(n,Un),{xAxis:c,xAxisIds:l}=F(),{yAxis:u,yAxisIds:d}=e(),f=Wn(n),p=u[d[0]],m=c[l[0]];return(0,Z.jsxs)(zn,V({},s,{className:f.root,children:[a&&(0,Z.jsx)(Vn,{axis:m,start:i.top,end:i.height+i.top,classes:f}),o&&(0,Z.jsx)(Hn,{axis:p,start:i.left,end:i.width+i.left,classes:f})]}))}Oe(),Y();function Kn(e){return ke(`MuiChartsAxisHighlight`,e)}const qn=X(`MuiChartsAxisHighlight`,[`root`]);H(),U();const Jn=W(`path`,{name:`MuiChartsAxisHighlight`,slot:`Root`})(({theme:e})=>({pointerEvents:`none`,variants:[{props:{axisHighlight:`band`},style:V({fill:`white`,fillOpacity:.1},e.applyStyles(`light`,{fill:`gray`}))},{props:{axisHighlight:`line`},style:V({strokeDasharray:`5 2`,stroke:`#ffffff`},e.applyStyles(`light`,{stroke:`#000000`}))}]}));function Yn(e){let{type:t,classes:n}=e,{left:a,width:o}=r(),s=he(),c=i(),l=b(c,d),u=P(s),f=t===`band`&&l!==null&&h(s);return(0,Z.jsxs)(Q.Fragment,{children:[f&&s(l)!==void 0&&(0,Z.jsx)(Jn,{d:`M ${a} ${s(l)-(s.step()-s.bandwidth())/2} l 0 ${s.step()} l ${o} 0 l 0 ${-s.step()} Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&l!==null&&(0,Z.jsx)(Jn,{d:`M ${a} ${u(l)} L ${a+o} ${u(l)}`,className:n.root,ownerState:{axisHighlight:`line`}})]})}function Xn(e){let{type:t,classes:n}=e,{top:a,height:o}=r(),s=ge(),c=i(),l=b(c,f),u=P(s),d=t===`band`&&l!==null&&h(s);return(0,Z.jsxs)(Q.Fragment,{children:[d&&s(l)!==void 0&&(0,Z.jsx)(Jn,{d:`M ${s(l)-(s.step()-s.bandwidth())/2} ${a} l ${s.step()} 0 l 0 ${o} l ${-s.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:`band`}}),t===`line`&&l!==null&&(0,Z.jsx)(Jn,{d:`M ${u(l)} ${a} L ${u(l)} ${a+o}`,className:n.root,ownerState:{axisHighlight:`line`}})]})}q();const Zn=()=>{let e={root:[`root`]};return J(e,Kn)};function Qn(e){let{x:t,y:n}=e,r=Zn();return(0,Z.jsxs)(Q.Fragment,{children:[t&&(0,Z.jsx)(Xn,{type:t,classes:r}),n&&(0,Z.jsx)(Yn,{type:n,classes:r})]})}Oe(),q(),Y();function $n(e){return ke(`MuiBarElement`,e)}const er=X(`MuiBarElement`,[`root`,`highlighted`,`faded`,`series`]),tr=e=>{let{classes:t,id:n,isHighlighted:r,isFaded:i}=e,a={root:[`root`,`series-${n}`,r&&`highlighted`,i&&`faded`]};return J(a,$n,t)};H(),B();const nr=[`ownerState`,`skipAnimation`,`id`,`dataIndex`,`xOrigin`,`yOrigin`];function rr(e){let{ownerState:t}=e,n=z(e,nr),r=Nt(e);return(0,Z.jsx)(`rect`,V({},n,{filter:t.isHighlighted?`brightness(120%)`:void 0,opacity:t.isFaded?.3:1},r))}H(),B(),Te();const ir=[`id`,`dataIndex`,`classes`,`color`,`slots`,`slotProps`,`style`,`onClick`,`skipAnimation`,`layout`,`x`,`xOrigin`,`y`,`yOrigin`,`width`,`height`];function ar(e){let{id:t,dataIndex:n,classes:r,color:i,slots:a,slotProps:o,style:s,onClick:c,skipAnimation:l,layout:u,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g}=e,_=z(e,ir),v=k({type:`bar`,seriesId:t,dataIndex:n}),{isFaded:y,isHighlighted:b}=N({seriesId:t,dataIndex:n}),x={id:t,dataIndex:n,classes:r,color:i,isFaded:y,isHighlighted:b},S=tr(x),C=a?.bar??rr,w=K({elementType:C,externalSlotProps:o?.bar,externalForwardedProps:_,additionalProps:V({},v,{id:t,dataIndex:n,color:i,x:d,xOrigin:f,y:p,yOrigin:m,width:h,height:g,style:s,onClick:c,cursor:c?`pointer`:`unset`,stroke:`none`,fill:i,skipAnimation:l,layout:u}),className:S.root,ownerState:x});return(0,Z.jsx)(C,V({},w))}const or=(e,{hasNegative:t,hasPositive:n,borderRadius:r,layout:i})=>{if(!r)return 0;let a=i===`vertical`;return e===`top-left`&&(a&&n||!a&&t)||e===`top-right`&&(a&&n||!a&&n)||e===`bottom-right`&&(a&&t||!a&&n)||e===`bottom-left`&&(a&&t||!a&&t)?r:0};B(),H();const sr=[`maskId`,`x`,`y`,`width`,`height`,`skipAnimation`];function cr(e,t,n){let r=V({},n,{borderRadius:t}),i=Math.min(e,or(`top-left`,r)),a=Math.min(e,or(`top-right`,r)),o=Math.min(e,or(`bottom-right`,r)),s=Math.min(e,or(`bottom-left`,r));return`inset(0px round ${i}px ${a}px ${o}px ${s}px)`}function lr(e,t){let n=y(e.x,t.x),r=y(e.y,t.y),i=y(e.width,t.width),a=y(e.height,t.height),o=y(e.borderRadius,t.borderRadius);return e=>({x:n(e),y:r(e),width:i(e),height:a(e),borderRadius:o(e)})}function ur(e){let t={x:e.x,y:e.y+(e.ownerState.layout===`vertical`?e.height:0),width:e.ownerState.layout===`vertical`?e.width:0,height:e.ownerState.layout===`vertical`?0:e.height,borderRadius:e.borderRadius};return j({x:e.x,y:e.y,width:e.width,height:e.height,borderRadius:e.borderRadius},{createInterpolator:lr,transformProps:t=>({x:t.x,y:t.y,width:t.width,height:t.height,style:{clipPath:cr(e.ownerState.layout===`vertical`?t.height:t.width,t.borderRadius,e.ownerState)}}),applyProps(e,t){e.setAttribute(`x`,t.x.toString()),e.setAttribute(`y`,t.y.toString()),e.setAttribute(`width`,t.width.toString()),e.setAttribute(`height`,t.height.toString()),e.style.clipPath=t.style.clipPath},initialProps:t,skip:e.skipAnimation,ref:e.ref})}function dr(e){let t=ur(V({},e,{borderRadius:e.ownerState.borderRadius??0}));return(0,Z.jsx)(`rect`,V({},t))}function fr(e){let{maskId:t,x:n,y:r,width:i,height:a,skipAnimation:o}=e,s=z(e,sr);return!e.borderRadius||e.borderRadius<=0?null:(0,Z.jsx)(`clipPath`,{id:t,children:(0,Z.jsx)(dr,{ownerState:s,x:n,y:r,width:i,height:a,skipAnimation:o})})}Oe(),Y(),q();function pr(e){return ke(`MuiBarLabel`,e)}const mr=X(`MuiBarLabel`,[`root`,`highlighted`,`faded`,`animate`]),hr=e=>{let{classes:t,seriesId:n,isFaded:r,isHighlighted:i,skipAnimation:a}=e,o={root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`,!a&&`animate`]};return J(o,pr,t)},gr=e=>{let{barLabel:t,value:n,dataIndex:r,seriesId:i,height:a,width:o}=e;return t===`value`?n?n?.toString():null:t({seriesId:i,dataIndex:r,value:n},{bar:{height:a,width:o}})};B(),H(),U();const _r=[`seriesId`,`dataIndex`,`color`,`isFaded`,`isHighlighted`,`classes`,`skipAnimation`,`layout`,`xOrigin`,`yOrigin`],vr=W(`text`,{name:`MuiBarLabel`,slot:`Root`,overridesResolver:(e,t)=>[{[`&.${mr.faded}`]:t.faded},{[`&.${mr.highlighted}`]:t.highlighted},t.root]})(({theme:e})=>V({},e?.typography?.body2,{stroke:`none`,fill:(e.vars||e)?.palette?.text?.primary,transition:`opacity 0.2s ease-in, fill 0.2s ease-in`,textAnchor:`middle`,dominantBaseline:`central`,pointerEvents:`none`,opacity:1,[`&.${mr.faded}`]:{opacity:.3}}));function yr(e){let t=be({props:e,name:`MuiBarLabel`}),n=z(t,_r),r=Ft(t);return(0,Z.jsx)(vr,V({},n,r))}H(),B(),Te();const br=[`seriesId`,`classes`,`color`,`dataIndex`,`barLabel`,`slots`,`slotProps`,`xOrigin`,`yOrigin`,`x`,`y`,`width`,`height`,`value`,`skipAnimation`,`layout`],xr=[`ownerState`];function Sr(e){let{seriesId:t,classes:n,color:r,dataIndex:i,barLabel:a,slots:o,slotProps:s,xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,value:m,skipAnimation:h,layout:g}=e,_=z(e,br),{isFaded:v,isHighlighted:y}=N({seriesId:t,dataIndex:i}),b={seriesId:t,classes:n,color:r,isFaded:v,isHighlighted:y,dataIndex:i,skipAnimation:h,layout:g},x=hr(b),S=o?.barLabel??yr,C=K({elementType:S,externalSlotProps:s?.barLabel,additionalProps:V({},_,{xOrigin:c,yOrigin:l,x:u,y:d,width:f,height:p,className:x.root}),ownerState:b}),{ownerState:w}=C,T=z(C,xr);if(!a)return null;let E=gr({barLabel:a,value:m,dataIndex:i,seriesId:t,height:p,width:f});return E?(0,Z.jsx)(S,V({},T,w,{children:E})):null}H(),B();const Cr=[`bars`,`skipAnimation`];function wr(e){let{bars:t,skipAnimation:n}=e,r=z(e,Cr);return(0,Z.jsx)(Q.Fragment,{children:t.map(({xOrigin:e,yOrigin:t,x:i,y:a,seriesId:o,dataIndex:s,color:c,value:l,width:u,height:d,layout:f})=>(0,Z.jsx)(Sr,V({seriesId:o,dataIndex:s,value:l,color:c,xOrigin:e,yOrigin:t,x:i,y:a,width:u,height:d,skipAnimation:n??!1,layout:f??`vertical`},r),`${o}-${s}`))})}const Tr=(e,t)=>{let n=`${e}-axis`,r=`${e}Axis`,i=e===`x`?x:S;return t===i?`The first \`${r}\``:`The ${n} with id "${t}"`};function Er(e,t,n,r,i,a,o){let s=i[r],c=o[a],l=e?s:c,u=e?c:s,d=e?r:a,f=e?a:r,p=e?`x`:`y`,m=e?`y`:`x`;if(!g(l))throw Error(`MUI X Charts: ${Tr(p,d)} should be of type "band" to display the bar series of id "${t}".`);if(l.data===void 0)throw Error(`MUI X Charts: ${Tr(p,d)} should have data property.`);if(g(u)||_(u))throw Error(`MUI X Charts: ${Tr(m,f)} should be a continuous type to display the bar series of id "${t}".`)}H(),B(),U();const Dr=[`skipAnimation`,`onItemClick`,`borderRadius`,`barLabel`];function Or({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};let r=e/(t+(t-1)*n),i=n*r;return{barWidth:r,offset:i}}const kr=()=>{let t=jt()??{series:{},stackingGroups:[],seriesOrder:[]},i=r(),a=n(),{series:s,stackingGroups:c}=t,{xAxis:l,xAxisIds:u}=F(),{yAxis:d,yAxisIds:f}=e(),p=u[0],m=f[0],h={},g=c.flatMap(({ids:e},t)=>{let n=i.left,r=i.left+i.width,u=i.top,f=i.top+i.height;return e.flatMap(e=>{let i=s[e].xAxisId??p,g=s[e].yAxisId??m,_=l[i],v=d[g],y=s[e].layout===`vertical`;Er(y,e,s[e],i,l,g,d);let b=y?_:v,x=_.scale,S=v.scale,C=o(s[e],l[i],d[g]),w=b.scale.bandwidth(),{barWidth:T,offset:E}=Or({bandWidth:w,numberOfGroups:c.length,gapRatio:b.barGapRatio}),ee=t*(T+E),{stackedData:te,data:ne,layout:D}=s[e];return b.data.map((i,o)=>{if(ne[o]==null)return null;let c=te[o],l=c.map(e=>y?S(e):x(e)),d=Math.round(Math.min(...l)),p=Math.round(Math.max(...l)),m=s[e].stack,g={seriesId:e,dataIndex:o,layout:D,x:y?x(i)+ee:d,y:y?d:S(i)+ee,xOrigin:x(0)??0,yOrigin:S(0)??0,height:y?p-d:T,width:y?T:p-d,color:C(o),value:ne[o],maskId:`${a}_${m||e}_${t}_${o}`};if(g.x>r||g.x+g.width<n||g.y>f||g.y+g.height<u)return null;h[g.maskId]||(h[g.maskId]={id:g.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:g.layout,xOrigin:x(0),yOrigin:S(0),x:0,y:0});let _=h[g.maskId];return _.width=g.layout===`vertical`?g.width:_.width+g.width,_.height=g.layout===`vertical`?_.height+g.height:g.height,_.x=Math.min(_.x===0?1/0:_.x,g.x),_.y=Math.min(_.y===0?1/0:_.y,g.y),_.hasNegative=_.hasNegative||(g.value??0)<0,_.hasPositive=_.hasPositive||(g.value??0)>0,g}).filter(e=>e!==null)})});return{completedData:g,masksData:Object.values(h)}},Ar=W(`g`,{name:`MuiBarPlot`,slot:`Root`})({[`& .${er.root}`]:{transition:`opacity 0.2s ease-in, fill 0.2s ease-in`}});function jr(e){let{completedData:t,masksData:n}=kr(),{skipAnimation:r,onItemClick:i,borderRadius:a,barLabel:o}=e,s=z(e,Dr),c=oe(),l=O(c||r),u=!a||a<=0;return(0,Z.jsxs)(Ar,{children:[!u&&n.map(({id:e,x:t,y:n,width:r,height:i,hasPositive:o,hasNegative:s,layout:c})=>(0,Z.jsx)(fr,{maskId:e,borderRadius:a,hasNegative:s,hasPositive:o,layout:c,x:t,y:n,width:r,height:i,skipAnimation:l??!1},e)),t.map(({seriesId:e,dataIndex:t,color:n,maskId:r,layout:a,x:o,xOrigin:c,y:d,yOrigin:f,width:p,height:m})=>{let h=(0,Z.jsx)(ar,V({id:e,dataIndex:t,color:n,skipAnimation:l??!1,layout:a??`vertical`,x:o,xOrigin:c,y:d,yOrigin:f,width:p,height:m},s,{onClick:i&&(n=>{i(n,{type:`bar`,seriesId:e,dataIndex:t})})}),`${e}-${t}`);return u?h:(0,Z.jsx)(`g`,{clipPath:`url(#${r})`,children:h},`${e}-${t}`)}),o&&(0,Z.jsx)(wr,V({bars:t,skipAnimation:l,barLabel:o},s))]})}U(),Y(),Ae();const Mr=X(`MuiAppearingMask`,[`animate`]),Nr=W(`rect`)({animationName:`animate-width`,animationTimingFunction:de,animationDuration:`0s`,[`&.${Mr.animate}`]:{animationDuration:`${ue}ms`},"@keyframes animate-width":{from:{width:0}}});function Pr(e){let t=r(),i=n(),a=ae(`${i}-${e.id}`);return(0,Z.jsxs)(Q.Fragment,{children:[(0,Z.jsx)(`clipPath`,{id:a,children:(0,Z.jsx)(Nr,{className:je(!e.skipAnimation&&Mr.animate),x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),(0,Z.jsx)(`g`,{clipPath:`url(#${a})`,children:e.children})]})}function Fr(e){switch(e){case`catmullRom`:return ft.alpha(.5);case`linear`:return et;case`monotoneX`:return bt;case`monotoneY`:return xt;case`natural`:return wt;case`step`:return Et;case`stepBefore`:return Dt;case`stepAfter`:return Ot;case`bumpY`:return ot;case`bumpX`:return at;default:return bt}}H(),B();const Ir=[`skipAnimation`,`ownerState`],Lr=Q.forwardRef(function(e,t){let{skipAnimation:n,ownerState:r}=e,i=z(e,Ir),a=It(V({},e,{ref:t}));return(0,Z.jsx)(Pr,{skipAnimation:n,id:`${r.id}-line-clip`,children:(0,Z.jsx)(`path`,V({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:`round`,fill:`none`,filter:r.isHighlighted?`brightness(120%)`:void 0,opacity:r.isFaded?.3:1},i,a))})});H(),B(),q(),Te(),Oe(),Y();const Rr=[`id`,`classes`,`color`,`gradientId`,`slots`,`slotProps`,`onClick`];function zr(e){return ke(`MuiLineElement`,e)}const Br=X(`MuiLineElement`,[`root`,`highlighted`,`faded`,`series`]),Vr=e=>{let{classes:t,id:n,isFaded:r,isHighlighted:i}=e,a={root:[`root`,`series-${n}`,i&&`highlighted`,r&&`faded`]};return J(a,zr,t)};function Hr(e){let{id:t,classes:n,color:r,gradientId:i,slots:a,slotProps:o,onClick:s}=e,c=z(e,Rr),l=k({type:`line`,seriesId:t}),{isFaded:u,isHighlighted:d}=N({seriesId:t}),f={id:t,classes:n,color:r,gradientId:i,isFaded:u,isHighlighted:d},p=Vr(f),m=a?.line??Lr,h=K({elementType:m,externalSlotProps:o?.line,additionalProps:V({},l,{onClick:s,cursor:s?`pointer`:`unset`}),className:p.root,ownerState:f});return(0,Z.jsx)(m,V({},c,h))}B(),H(),U();const Ur=[`slots`,`slotProps`,`skipAnimation`,`onItemClick`],Wr=W(`g`,{name:`MuiAreaPlot`,slot:`Root`})({[`& .${Br.root}`]:{transition:`opacity 0.2s ease-in, fill 0.2s ease-in`}}),Gr=()=>{let t=fe(),{xAxis:n,xAxisIds:r}=F(),{yAxis:i,yAxisIds:a}=e(),o=M(),s=Q.useMemo(()=>{if(t===void 0)return[];let{series:e,stackingGroups:s}=t,c=r[0],l=a[0];return s.flatMap(({ids:t})=>t.flatMap(t=>{let{xAxisId:r=c,yAxisId:a=l,stackedData:s,data:u,connectNulls:d,curve:f,strictStepCurve:p}=e[t],m=n[r].scale,g=P(m),_=i[a].scale,v=n[r].data,y=i[a].colorScale&&o(a)||n[r].colorScale&&o(r)||void 0,b=f?.includes(`step`)&&!p&&h(m),x=v?.flatMap((e,t)=>{let n=u[t]==null;if(b){let r=[{x:e,y:s[t],nullData:n,isExtension:!1}];return!n&&(t===0||u[t-1]==null)&&r.unshift({x:(m(e)??0)-(m.step()-m.bandwidth())/2,y:s[t],nullData:n,isExtension:!0}),!n&&(t===u.length-1||u[t+1]==null)&&r.push({x:(m(e)??0)+(m.step()+m.bandwidth())/2,y:s[t],nullData:n,isExtension:!0}),r}return{x:e,y:s[t],nullData:n}})??[],S=d?x.filter(e=>!e.nullData):x,C=rt().x(e=>e.isExtension?e.x:g(e.x)).defined(e=>d||!e.nullData||!!e.isExtension).y(e=>_(e.y[1])),w=C.curve(Fr(f))(S)||``;return V({},e[t],{gradientId:y,d:w,seriesId:t})}))},[t,r,a,n,i,o]);return s};function Kr(e){let{slots:t,slotProps:n,skipAnimation:r,onItemClick:i}=e,a=z(e,Ur),o=oe(),s=O(o||r),c=Gr();return(0,Z.jsx)(Wr,V({},a,{children:c.map(({d:e,seriesId:r,color:a,gradientId:o})=>(0,Z.jsx)(Hr,{id:r,d:e,color:a,gradientId:o,skipAnimation:s,slots:t,slotProps:n,onClick:i&&(e=>i(e,{type:`line`,seriesId:r}))},r))}))}U();var qr=Fe(Ce());const Jr=({data:e,type:t,title:n,description:r,height:i=350,labels:a,isStacked:o})=>{let s=e.series.map(({values:e,params:n,metric_type:r,filter_index:i})=>{let{label:s}=C({metric_type:r,params:n,labels:a,filter_index:i}),c={label:s,stack:o?`total`:void 0,labelMarkType:`square`};if(t===`line`||t===`bar`)return{type:t,data:e,...c};Ue(t)}),c=[{data:e.sources.map(e=>(0,qr.default)(e.timestamp).format(`YYYY-MM-DD HH:mm:ss`)),scaleType:`band`,height:50}],l=Ze(),u=l?.OnClickedPointComponent,[d,f]=(0,Q.useState)(null),p=d&&e.sources[d.index].snapshot_id;return(0,Z.jsx)(T,{title:n,description:r,height:i,children:(0,Z.jsxs)(Yr.Provider,{value:{data:e},children:[(0,Z.jsx)(ie,{series:s,xAxis:c,SurfaceComponents:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Qr,{}),u&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)($r,{onSelect:e=>f({index:e})}),d&&(0,Z.jsx)(ei,{...d})]})]})}),u&&p&&(0,Z.jsx)(R,{position:`relative`,children:(0,Z.jsx)(_e,{position:`absolute`,top:-20,right:-15,children:(0,Z.jsx)(u,{snapshotId:p})})})]})})},Yr=(0,Q.createContext)({data:{series:[],sources:[]}}),Xr=()=>(0,Q.useContext)(Yr),Zr=()=>{let e=le(),{data:t}=Xr();if(!e)return null;let n=e.at(0)?.dataIndex,r=typeof n==`number`&&t.sources?.[n]?.tags||[];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(ce,{}),(0,Z.jsx)(te,{sx:{backgroundColor:`background.paper`,borderTop:`unset`,p:1,width:0,minWidth:`100%`},children:(0,Z.jsxs)(_e,{direction:`row`,flexWrap:`wrap`,gap:1,children:[(0,Z.jsx)(G,{children:`Report tags:`}),r.length===0&&(0,Z.jsx)(G,{children:`None`}),r.map(e=>(0,Z.jsx)(Se,{size:`small`,label:e},e))]})})]})},Qr=()=>(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(jr,{}),(0,Z.jsx)(Kr,{}),(0,Z.jsx)(Gn,{horizontal:!0}),(0,Z.jsx)(On,{label:`Timestamps`,position:`bottom`,labelStyle:{fontSize:18}}),(0,Z.jsx)(In,{position:`left`}),(0,Z.jsx)(Qn,{x:`band`}),(0,Z.jsx)(se,{trigger:`axis`,children:(0,Z.jsx)(Zr,{})})]}),$r=({onSelect:e})=>{let{left:t,top:n,width:i,height:a}=r(),o=I(),s=i/o.tickNumber;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(`rect`,{x:t,y:n,width:i,height:a,opacity:0,style:{cursor:`pointer`},onClick:t=>{let n=t.target.getBoundingClientRect(),r=Math.floor((t.clientX-n.x)/s),i=We({value:r,min:0,max:o.tickNumber-1});e(i)}})})},ei=({index:e})=>{let{left:t,top:n,width:i,height:a}=r(),o=I(),s=xe(),c=i/o.tickNumber;return(0,Z.jsx)(`rect`,{x:t+c*e,y:n,width:c,height:a,fill:s.vars.palette.text.primary,shapeRendering:`crispEdges`,pointerEvents:`none`,opacity:.1})},ti=({title:e,description:t})=>(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(T,{title:e,description:t,sxCardContent:{p:`16px !important`},textCenterAlign:!0})}),ni=e=>{if(e.type===`bar`||e.type===`line`)return(0,Z.jsx)(Jr,{...e});if(e.type===`pie`)return(0,Z.jsx)(re,{...e});if(e.type===`counter`)return(0,Z.jsx)(Qe,{...e});if(e.type===`text`)return(0,Z.jsx)(ti,{...e});Ue(e.type)},ri=({height:e=350,title:t,subtitle:n,isShowTitle:r,skipBody:i})=>(0,Z.jsx)(te,{elevation:0,children:(0,Z.jsxs)(ee,{sx:{px:0},children:[(0,Z.jsxs)(R,{px:3,children:[t&&r&&(0,Z.jsx)(G,{variant:`h5`,fontWeight:500,gutterBottom:!0,children:t}),t&&!r&&(0,Z.jsx)(G,{variant:`h5`,width:Math.max(t.length*11,450),children:(0,Z.jsx)(E,{variant:`text`,animation:`wave`,sx:{mb:1}})}),n&&r&&(0,Z.jsx)(G,{fontWeight:400,gutterBottom:!0,children:n}),n&&!r&&(0,Z.jsx)(G,{children:(0,Z.jsx)(E,{variant:`text`,animation:`wave`,sx:{mb:1}})})]}),(t||n)&&!i&&(0,Z.jsx)(ve,{sx:{mb:2,mt:1}}),!i&&(0,Z.jsx)(R,{px:3,children:(0,Z.jsx)(E,{variant:`rectangular`,height:e,animation:`wave`})})]})}),ii=({panel:e,loadDataForPanel:t,data:n})=>{let r=Je(e),i=r.type!==`text`,a=Ke(e.values),o=`height`in r?r.height:200;return(0,Q.useEffect)(()=>{i&&t()},[a,i]),i?n?(0,Z.jsx)(ni,{...r,data:n}):(0,Z.jsx)(ri,{title:r.title,subtitle:r.description,height:o}):(0,Z.jsx)(ni,{...r})};D();const ai=({panel:e})=>{let{project:t}=Ie();ne(t);let{id:n}=t,r=Ne(`/projects/:projectId/load-panel-points`),i=()=>r.load({query:{body:JSON.stringify({series_filter:e.values.map(e=>({metric:e.metric,tags:e.tags??[],metadata:e.metadata??{},metric_labels:e.metric_labels??{}}))})},paramsToReplace:{projectId:n}}),a=r.data;return(0,Z.jsx)(ii,{panel:e,loadDataForPanel:i,data:a})},oi=ai;D();const si=({snapshotId:e})=>{let{project:t}=Ie();ne(t);let n=Be();return(0,Z.jsx)(Re,{type:`button`,to:`/projects/:projectId/reports/:snapshotId`,title:`View report`,variant:`outlined`,paramsToReplace:{projectId:t.id,snapshotId:e},disabled:n})},ci=si,li=`/projects/:projectId/?index`,ui={title:`Dashboard`},di={crumb:ui},fi=`/api/v2/dashboards/{project_id}`,pi=({params:e,query:t})=>{let{projectId:n}=e;return ze.GET(fi,{params:{path:{project_id:n},query:t},parseAs:`text`}).then(He()).then(Le)},mi=()=>{let{loaderData:e}=Ve();return(0,Z.jsx)(R,{py:2,children:(0,Z.jsx)(Xe.Provider,{value:{OnClickedPointComponent:ci},children:(0,Z.jsx)(Ye,{PanelComponent:oi,panels:e.panels})})})};export{mi as Component,li as currentRoutePath,di as handle,pi as loadData};
